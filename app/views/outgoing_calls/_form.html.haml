.container
  = form_for @outgoing_call do |f|
    -if @outgoing_call.errors.any?
      #error_explanation
        %h2= "#{pluralize(@outgoing_call.errors.count, "error")} prohibited this outgoing_call from being saved:"
        %ul
          - @outgoing_call.errors.full_messages.each do |msg|
            %li= msg

    .column
      .span-4
        .field
          = f.label :calldate
      .span-8
        #calldate
  
    .span-4
      .field
        = f.label :src, "Source"
    .span-8
      = f.select 'src', Device.all.map(&:exten)

    .span-4
      .field
        = f.label :dst, "Destination"
    .span-8
      = f.text_field :dst

    .span-4
      .field
        = f.label :duration, "Durations"
    .span-8
      = f.text_field :duration

    .span-4
      .field
        = f.label :billsec, "Bill seconds"
    .span-8
      = f.text_field :billsec

    .actions
      = f.submit 'Save', :id => 'submit_button'

:javascript
  $(document).ready(function() {
    $("#submit_button").click( function(){
      $("#submit_button").attr('disabled', true);
      from_date = $(" #calldate ").val();
      input_tag = "<input type =\"hidden\" id=\"outgoing_call_calldate\" name=\"outgoing_call[calldate]\" value=\"" + from_date + "\">";
      $("#edit_outgoing_call_1").append(input_tag);
    });
  });

  $(function() {
    $('#calldate').datepicker({ inline: true, defaultDate: "#{@outgoing_call.calldate}", dateFormat: "yy-mm-dd"});
  });

