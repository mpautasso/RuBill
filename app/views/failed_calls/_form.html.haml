.container
  = form_for @failed_call do |f|
    -if @failed_call.errors.any?
      #error_explanation
        %h2= "#{pluralize(@failed_call.errors.count, "error")} prohibited this failed_call from being saved:"
        %ul
          - @failed_call.errors.full_messages.each do |msg|
            %li= msg

    .column
      .span-4
        .field
          = f.label :calldate
      .span-8
        #calldate
  
    .span-4
      .field
        = f.label :src
    .span-8
      = f.text_field :src

    .span-4
      .field
        = f.label :dst
    .span-8
      = f.text_field :dst

    .span-4
      .field
        = f.label :duration
    .span-8
      = f.text_field :duration

    .span-4
      .field
        = f.label :billsec
    .span-8
      = f.text_field :billsec

    .actions
      = f.submit 'Save', :id => 'submit_button'

:javascript
  $(document).ready(function() {
    $("#submit_button").click( function(){
      $("#submit_button").attr('disabled', true);
      from_date = $(" #calldate ").val();
      input_tag = "<input type =\"hidden\" id=\"failed_call_calldate\" name=\"failed_call[calldate]\" value=\"" + from_date + "\">";
      $("#edit_failed_call_1").append(input_tag);
    });
  });

  $(function() {
    $('#calldate').datepicker({ inline: true, defaultDate: "#{@failed_call.calldate.to_s('%Y %m %d')}", dateFormat: 'yy-mm-dd'});
  });

